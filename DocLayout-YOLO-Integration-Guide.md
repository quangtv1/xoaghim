# TÃ­ch há»£p DocLayout-YOLO vá»›i PhÆ°Æ¡ng phÃ¡p Hybrid Polygon
## HÆ°á»›ng dáº«n báº£o vá»‡ vÃ¹ng vÄƒn báº£n trong á»©ng dá»¥ng xÃ³a ghim tÃ i liá»‡u PDF

---

## Má»¥c lá»¥c

1. [Giá»›i thiá»‡u váº¥n Ä‘á»](#1-giá»›i-thiá»‡u-váº¥n-Ä‘á»)
2. [Tá»•ng quan giáº£i phÃ¡p](#2-tá»•ng-quan-giáº£i-phÃ¡p)
3. [DocLayout-YOLO lÃ  gÃ¬?](#3-doclayout-yolo-lÃ -gÃ¬)
4. [PhÆ°Æ¡ng phÃ¡p Hybrid Polygon](#4-phÆ°Æ¡ng-phÃ¡p-hybrid-polygon)
5. [Kiáº¿n trÃºc há»‡ thá»‘ng](#5-kiáº¿n-trÃºc-há»‡-thá»‘ng)
6. [Chi tiáº¿t thuáº­t toÃ¡n](#6-chi-tiáº¿t-thuáº­t-toÃ¡n)
7. [TÃ­ch há»£p vÃ o á»©ng dá»¥ng](#7-tÃ­ch-há»£p-vÃ o-á»©ng-dá»¥ng)
8. [HÆ°á»›ng dáº«n sá»­ dá»¥ng](#8-hÆ°á»›ng-dáº«n-sá»­-dá»¥ng)
9. [Phá»¥ lá»¥c: MÃ£ nguá»“n tham kháº£o](#9-phá»¥-lá»¥c-mÃ£-nguá»“n-tham-kháº£o)

---

## 1. Giá»›i thiá»‡u váº¥n Ä‘á»

### 1.1. Bá»‘i cáº£nh

Khi sá»‘ hÃ³a tÃ i liá»‡u giáº¥y, cÃ¡c trang thÆ°á»ng Ä‘Æ°á»£c scan cÃ¹ng vá»›i cÃ¡c váº­t liá»‡u gáº¯n káº¿t nhÆ°:
- **Ghim báº¥m (staples)** á»Ÿ gÃ³c trang
- **Káº¹p giáº¥y** á»Ÿ cáº¡nh trang
- **Váº¿t báº©n, Ä‘á»‘m má»±c** á»Ÿ biÃªn tÃ i liá»‡u
- **Lá»— Ä‘á»¥c** tá»« bÃ¬a káº¹p há»“ sÆ¡

Nhá»¯ng yáº¿u tá»‘ nÃ y lÃ m giáº£m cháº¥t lÆ°á»£ng tÃ i liá»‡u sá»‘ vÃ  gÃ¢y khÃ³ khÄƒn cho viá»‡c OCR (nháº­n dáº¡ng kÃ½ tá»±) sau nÃ y.

### 1.2. Giáº£i phÃ¡p hiá»‡n táº¡i

á»¨ng dá»¥ng **Staple Remover** cho phÃ©p ngÆ°á»i dÃ¹ng xÃ¡c Ä‘á»‹nh cÃ¡c vÃ¹ng cáº§n xÃ³a:
- **VÃ¹ng gÃ³c (Corner)**: 4 gÃ³c cá»§a trang (thÆ°á»ng cÃ³ ghim)
- **VÃ¹ng cáº¡nh (Edge/Margin)**: 4 cáº¡nh cá»§a trang (thÆ°á»ng cÃ³ váº¿t báº©n)
- **VÃ¹ng tÃ¹y chá»n (Custom)**: NgÆ°á»i dÃ¹ng tá»± váº½ vÃ¹ng cáº§n xÃ³a

### 1.3. Váº¥n Ä‘á» phÃ¡t sinh

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Váº¤N Äá»€                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  TÃ i liá»‡u CHUáº¨N              TÃ i liá»‡u KHÃ”NG CHUáº¨N           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ â”Œâ”€â”€â”             â”‚        â”‚ â”Œâ”€â”€â” TIÃŠU Äá»€    â”‚           â”‚
â”‚  â”‚ â”‚##â”‚             â”‚        â”‚ â”‚##â”‚ á»Ÿ gÃ³c trang â”‚           â”‚
â”‚  â”‚ â””â”€â”€â”˜             â”‚        â”‚ â””â”€â”€â”˜             â”‚           â”‚
â”‚  â”‚                  â”‚        â”‚                  â”‚           â”‚
â”‚  â”‚   Ná»˜I DUNG       â”‚        â”‚   Ná»˜I DUNG       â”‚           â”‚
â”‚  â”‚   VÄ‚N Báº¢N        â”‚        â”‚   VÄ‚N Báº¢N        â”‚           â”‚
â”‚  â”‚                  â”‚        â”‚                  â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                              â”‚
â”‚  â†’ XÃ³a gÃ³c: OK âœ“             â†’ XÃ³a gÃ³c: Máº¤T TIÃŠU Äá»€ âœ—      â”‚
â”‚                                                              â”‚
â”‚  Váº¥n Ä‘á»: KhÃ´ng pháº£i tÃ i liá»‡u nÃ o cÅ©ng cÃ³ layout chuáº©n.     â”‚
â”‚  Náº¿u vÄƒn báº£n náº±m á»Ÿ vÃ¹ng gÃ³c/cáº¡nh, viá»‡c xÃ³a sáº½ lÃ m máº¥t      â”‚
â”‚  ná»™i dung quan trá»ng.                                       â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Háº­u quáº£:**
- Máº¥t tiÃªu Ä‘á», sá»‘ trang, chÃº thÃ­ch
- Máº¥t báº£ng biá»ƒu náº±m sÃ¡t lá»
- Máº¥t ná»™i dung vÄƒn báº£n quan trá»ng
- KhÃ´ng thá»ƒ khÃ´i phá»¥c sau khi xá»­ lÃ½

---

## 2. Tá»•ng quan giáº£i phÃ¡p

### 2.1. Ã tÆ°á»Ÿng chÃ­nh

Sá»­ dá»¥ng **trÃ­ tuá»‡ nhÃ¢n táº¡o (AI)** Ä‘á»ƒ tá»± Ä‘á»™ng nháº­n diá»‡n vÃ¹ng cÃ³ vÄƒn báº£n trÆ°á»›c khi xÃ³a, tá»« Ä‘Ã³:
1. **PhÃ¡t hiá»‡n** táº¥t cáº£ vÃ¹ng chá»©a text, báº£ng, hÃ¬nh áº£nh trong trang
2. **Báº£o vá»‡** cÃ¡c vÃ¹ng nÃ y khá»i bá»‹ xÃ³a
3. **Tá»‘i Æ°u** vÃ¹ng xÃ³a Ä‘á»ƒ chá»‰ xÃ³a pháº§n an toÃ n

### 2.2. CÃ´ng nghá»‡ sá»­ dá»¥ng

| ThÃ nh pháº§n | CÃ´ng nghá»‡ | Má»¥c Ä‘Ã­ch |
|------------|-----------|----------|
| Nháº­n diá»‡n layout | DocLayout-YOLO | PhÃ¡t hiá»‡n vÃ¹ng text/table/figure |
| Xá»­ lÃ½ hÃ¬nh há»c | Shapely | TÃ­nh toÃ¡n giao/trá»« polygon |
| Tá»‘i Æ°u vÃ¹ng xÃ³a | Hybrid Polygon | Táº¡o vÃ¹ng xÃ³a an toÃ n |
| Giao diá»‡n | PyQt6 | Hiá»ƒn thá»‹ vÃ  tÆ°Æ¡ng tÃ¡c |

### 2.3. Luá»“ng xá»­ lÃ½ má»›i

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         LUá»’NG Xá»¬ LÃ Má»šI                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  TRÆ¯á»šC ÄÃ‚Y (khÃ´ng cÃ³ báº£o vá»‡):                                           â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                           â”‚
â”‚  PDF â†’ Chá»n vÃ¹ng xÃ³a â†’ XÃ³a ngay â†’ LÆ°u                                   â”‚
â”‚                          â†“                                               â”‚
â”‚                    (CÃ³ thá»ƒ máº¥t text)                                    â”‚
â”‚                                                                          â”‚
â”‚  BÃ‚Y GIá»œ (cÃ³ báº£o vá»‡):                                                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                    â”‚
â”‚  PDF â†’ DocLayout-YOLO â†’ PhÃ¡t hiá»‡n vÃ¹ng text                             â”‚
â”‚                              â†“                                           â”‚
â”‚        Chá»n vÃ¹ng xÃ³a â†’ Hybrid Polygon â†’ Tá»‘i Æ°u vÃ¹ng an toÃ n            â”‚
â”‚                                              â†“                           â”‚
â”‚                                         XÃ³a an toÃ n â†’ LÆ°u               â”‚
â”‚                                              â†“                           â”‚
â”‚                                      (Text Ä‘Æ°á»£c báº£o vá»‡ âœ“)               â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. DocLayout-YOLO lÃ  gÃ¬?

### 3.1. Giá»›i thiá»‡u

**DocLayout-YOLO** lÃ  mÃ´ hÃ¬nh AI chuyÃªn dá»¥ng cho viá»‡c phÃ¢n tÃ­ch bá»‘ cá»¥c tÃ i liá»‡u (Document Layout Analysis), Ä‘Æ°á»£c phÃ¡t triá»ƒn bá»Ÿi OpenDataLab dá»±a trÃªn kiáº¿n trÃºc YOLOv10.

### 3.2. Äáº·c Ä‘iá»ƒm ná»•i báº­t

| Äáº·c Ä‘iá»ƒm | GiÃ¡ trá»‹ | Ã nghÄ©a |
|----------|---------|---------|
| Tá»‘c Ä‘á»™ | ~5-6ms/trang | Xá»­ lÃ½ 10-15 triá»‡u trang/ngÃ y vá»›i 1 GPU |
| Äá»™ chÃ­nh xÃ¡c | 93.8% mAP | Cao nháº¥t trong cÃ¡c model cÃ¹ng tá»‘c Ä‘á»™ |
| Sá»‘ loáº¡i nháº­n diá»‡n | 10 loáº¡i | Äá»§ cho háº§u háº¿t tÃ i liá»‡u |
| Giáº¥y phÃ©p | Apache 2.0 | Miá»…n phÃ­ thÆ°Æ¡ng máº¡i |
| Ná»n táº£ng | HuggingFace | Dá»… dÃ ng táº£i vÃ  sá»­ dá»¥ng |

### 3.3. CÃ¡c loáº¡i vÃ¹ng nháº­n diá»‡n Ä‘Æ°á»£c

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              10 LOáº I VÃ™NG DocLayout-YOLO NHáº¬N DIá»†N          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Loáº¡i           â”‚ Tiáº¿ng Viá»‡t      â”‚ Báº£o vá»‡?          â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ title          â”‚ TiÃªu Ä‘á»         â”‚ âœ… CÃ³            â”‚   â”‚
â”‚  â”‚ plain_text     â”‚ VÄƒn báº£n         â”‚ âœ… CÃ³            â”‚   â”‚
â”‚  â”‚ table          â”‚ Báº£ng            â”‚ âœ… CÃ³            â”‚   â”‚
â”‚  â”‚ table_caption  â”‚ ChÃº thÃ­ch báº£ng  â”‚ âœ… CÃ³            â”‚   â”‚
â”‚  â”‚ table_footnote â”‚ Ghi chÃº báº£ng    â”‚ âœ… CÃ³            â”‚   â”‚
â”‚  â”‚ figure         â”‚ HÃ¬nh áº£nh        â”‚ âš™ï¸ TÃ¹y chá»n      â”‚   â”‚
â”‚  â”‚ figure_caption â”‚ ChÃº thÃ­ch hÃ¬nh  â”‚ âœ… CÃ³            â”‚   â”‚
â”‚  â”‚ isolate_formulaâ”‚ CÃ´ng thá»©c       â”‚ âœ… CÃ³            â”‚   â”‚
â”‚  â”‚ formula_captionâ”‚ ChÃº thÃ­ch CT    â”‚ âœ… CÃ³            â”‚   â”‚
â”‚  â”‚ abandon        â”‚ VÃ¹ng bá» qua     â”‚ âŒ KhÃ´ng         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                              â”‚
â”‚  Máº·c Ä‘á»‹nh: Báº£o vá»‡ táº¥t cáº£ trá»« "abandon" vÃ  "figure"         â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.4. CÃ¡ch DocLayout-YOLO hoáº¡t Ä‘á»™ng

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  INPUT â†’ OUTPUT                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  INPUT: áº¢nh trang tÃ i liá»‡u                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚  â”‚ BÃO CÃO QUáº¢N TRá»Š         â”‚                               â”‚
â”‚  â”‚ QuÃ½ III/2024             â”‚                               â”‚
â”‚  â”‚                          â”‚                               â”‚
â”‚  â”‚ 1. Tá»•ng quan             â”‚                               â”‚
â”‚  â”‚ Doanh thu tÄƒng 15%...    â”‚                               â”‚
â”‚  â”‚                          â”‚                               â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚                               â”‚
â”‚  â”‚ â”‚    Báº£ng 1      â”‚       â”‚                               â”‚
â”‚  â”‚ â”‚  Sá»‘ liá»‡u KD    â”‚       â”‚                               â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚                               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚                                                              â”‚
â”‚                      â†“ DocLayout-YOLO                       â”‚
â”‚                                                              â”‚
â”‚  OUTPUT: Danh sÃ¡ch bounding boxes                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚  â”‚ â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—    â”‚  Box 1: title                 â”‚
â”‚  â”‚ â•‘ BÃO CÃO QUáº¢N TRá»Š  â•‘    â”‚  (50, 30, 400, 70)           â”‚
â”‚  â”‚ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚  confidence: 0.95            â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚                               â”‚
â”‚  â”‚ â”‚ QuÃ½ III/2024      â”‚    â”‚  Box 2: plain_text           â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  (50, 75, 200, 95)           â”‚
â”‚  â”‚ â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—    â”‚                               â”‚
â”‚  â”‚ â•‘ 1. Tá»•ng quan      â•‘    â”‚  Box 3: plain_text           â”‚
â”‚  â”‚ â•‘ Doanh thu...      â•‘    â”‚  (50, 120, 500, 250)         â”‚
â”‚  â”‚ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•    â”‚                               â”‚
â”‚  â”‚ â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—       â”‚  Box 4: table                 â”‚
â”‚  â”‚ â•‘    Báº£ng 1      â•‘       â”‚  (80, 280, 450, 400)         â”‚
â”‚  â”‚ â•‘  Sá»‘ liá»‡u KD    â•‘       â”‚  confidence: 0.92            â”‚
â”‚  â”‚ â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•       â”‚                               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. PhÆ°Æ¡ng phÃ¡p Hybrid Polygon

### 4.1. Táº¡i sao cáº§n Hybrid Polygon?

Sau khi DocLayout-YOLO phÃ¡t hiá»‡n cÃ¡c vÃ¹ng cáº§n báº£o vá»‡, ta cáº§n má»™t phÆ°Æ¡ng phÃ¡p Ä‘á»ƒ:
- **TÃ­nh toÃ¡n** vÃ¹ng nÃ o an toÃ n Ä‘á»ƒ xÃ³a
- **Xá»­ lÃ½** cÃ¡c trÆ°á»ng há»£p vÃ¹ng xÃ³a chá»“ng láº¥n vá»›i vÃ¹ng báº£o vá»‡
- **Tá»‘i Æ°u** hÃ¬nh dáº¡ng vÃ¹ng xÃ³a cho phÃ¹ há»£p

**Hybrid Polygon** lÃ  phÆ°Æ¡ng phÃ¡p káº¿t há»£p nhiá»u ká»¹ thuáº­t hÃ¬nh há»c Ä‘á»ƒ giáº£i quyáº¿t váº¥n Ä‘á» nÃ y.

### 4.2. CÃ´ng thá»©c cá»‘t lÃµi

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CÃ”NG THá»¨C HYBRID POLYGON                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Safe_Zone = Simplify(                                      â”‚
â”‚                User_Zone - Buffer(Union(Protected), margin) â”‚
â”‚              )                                              â”‚
â”‚                                                              â”‚
â”‚  Trong Ä‘Ã³:                                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                   â”‚
â”‚  â€¢ User_Zone      : VÃ¹ng ngÆ°á»i dÃ¹ng muá»‘n xÃ³a               â”‚
â”‚  â€¢ Protected      : CÃ¡c vÃ¹ng text/table tá»« DocLayout-YOLO  â”‚
â”‚  â€¢ Union()        : Gá»™p cÃ¡c vÃ¹ng chá»“ng láº¥n thÃ nh má»™t       â”‚
â”‚  â€¢ Buffer(margin) : Má»Ÿ rá»™ng vÃ¹ng báº£o vá»‡ thÃªm lá» an toÃ n   â”‚
â”‚  â€¢ PhÃ©p trá»« (-)   : Loáº¡i bá» pháº§n giao khá»i vÃ¹ng xÃ³a       â”‚
â”‚  â€¢ Simplify()     : ÄÆ¡n giáº£n hÃ³a polygon káº¿t quáº£          â”‚
â”‚  â€¢ Safe_Zone      : VÃ¹ng an toÃ n cÃ³ thá»ƒ xÃ³a               â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.3. Minh há»a trá»±c quan

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MINH Há»ŒA HYBRID POLYGON                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  BÆ°á»›c 1: User chá»n vÃ¹ng gÃ³c     BÆ°á»›c 2: AI phÃ¡t hiá»‡n text              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚         â”‚       â”‚            â”‚         â”‚               â”‚
â”‚  â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚         â”‚       â”‚   â”Œâ”€â”€â”€â”€â”€â”€â” â”‚         â”‚               â”‚
â”‚  â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚         â”‚       â”‚   â”‚ TEXT â”‚ â”‚         â”‚               â”‚
â”‚  â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚         â”‚       â”‚   â””â”€â”€â”€â”€â”€â”€â”˜ â”‚         â”‚               â”‚
â”‚  â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚         â”‚       â”‚            â”‚         â”‚               â”‚
â”‚  â”‚            â”‚         â”‚       â”‚            â”‚         â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚  â–ˆ = VÃ¹ng user muá»‘n xÃ³a         TEXT = VÃ¹ng cáº§n báº£o vá»‡                 â”‚
â”‚                                                                          â”‚
â”‚  BÆ°á»›c 3: ThÃªm buffer (margin)   BÆ°á»›c 4: TÃ­nh Safe Zone                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚            â”‚         â”‚       â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚         â”‚               â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚       â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â”‚         â”‚               â”‚
â”‚  â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”   â”‚       â”‚       â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â”‚         â”‚               â”‚
â”‚  â”‚ â”‚ â”‚ TEXT â”‚   â”‚       â”‚       â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â”‚         â”‚               â”‚
â”‚  â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”˜   â”‚       â”‚       â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    â”‚         â”‚               â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚       â”‚            â”‚         â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚  Buffer = TEXT + 5px margin     â–ˆ = Safe Zone (cÃ³ thá»ƒ xÃ³a)             â”‚
â”‚                                                                          â”‚
â”‚  BÆ°á»›c 5: Káº¿t quáº£ cuá»‘i cÃ¹ng                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                               â”‚
â”‚  â”‚â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â”‚         â”‚       â–“ = VÃ¹ng Ä‘Æ°á»£c xÃ³a (fill tráº¯ng)        â”‚
â”‚  â”‚â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“ â”‚         â”‚       TEXT = ÄÆ°á»£c báº£o toÃ n nguyÃªn váº¹n        â”‚
â”‚  â”‚â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â”Œâ”€â”€â”€â”€â”€â”€â”    â”‚                                               â”‚
â”‚  â”‚â–“â–“â–“â–“â–“â–“â–“â–“â–“ â”‚ TEXT â”‚    â”‚                                               â”‚
â”‚  â”‚â–“â–“â–“â–“â–“â–“â–“â–“  â””â”€â”€â”€â”€â”€â”€â”˜    â”‚                                               â”‚
â”‚  â”‚            â”‚         â”‚                                               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                               â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.4. CÃ¡c trÆ°á»ng há»£p xá»­ lÃ½

#### TrÆ°á»ng há»£p 1: KhÃ´ng cÃ³ text trong vÃ¹ng xÃ³a
```
User Zone              Protected Regions        Safe Zone
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         (KhÃ´ng cÃ³)              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚    â†’                       â†’    â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚
â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚         KhÃ´ng overlap           â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                               (Giá»¯ nguyÃªn)
```

#### TrÆ°á»ng há»£p 2: Text náº±m hoÃ n toÃ n trong vÃ¹ng xÃ³a
```
User Zone              Protected Region         Safe Zone
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚â–ˆâ–ˆâ”Œâ”€â”€â”€â”€â”€â”€â”â–ˆâ–ˆâ”‚    â†’    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”  â”‚    â†’     â”‚â–ˆâ–ˆ        â–ˆâ–ˆâ”‚
â”‚â–ˆâ–ˆâ”‚ TEXT â”‚â–ˆâ–ˆâ”‚         â”‚  â”‚ TEXT â”‚  â”‚          â”‚â–ˆâ–ˆ        â–ˆâ–ˆâ”‚
â”‚â–ˆâ–ˆâ””â”€â”€â”€â”€â”€â”€â”˜â–ˆâ–ˆâ”‚         â”‚  â””â”€â”€â”€â”€â”€â”€â”˜  â”‚          â”‚â–ˆâ–ˆ        â–ˆâ–ˆâ”‚
â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚         â”‚            â”‚          â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                               (Táº¡o lá»— há»•ng)
```

#### TrÆ°á»ng há»£p 3: Text cáº¯t ngang vÃ¹ng xÃ³a
```
User Zone              Protected Region         Safe Zones (2 pháº§n)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚         â”‚            â”‚          â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚
â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚    â†’    â”‚â”€â”€â”€â”€TEXTâ”€â”€â”€â”€â”‚    â†’     â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚
â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚         â”‚            â”‚          â”‚            â”‚
â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚         â”‚            â”‚          â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                               (2 polygon riÃªng)
```

#### TrÆ°á»ng há»£p 4: Text bao phá»§ toÃ n bá»™ vÃ¹ng xÃ³a
```
User Zone              Protected Region         Safe Zone
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚    â†’    â”‚â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â”‚    â†’     â”‚            â”‚
â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚         â”‚â–‘â–‘â–‘â–‘TEXTâ–‘â–‘â–‘â–‘â”‚          â”‚  (Empty)   â”‚
â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚         â”‚â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â”‚          â”‚            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                               + Cáº£nh bÃ¡o user
```

---

## 5. Kiáº¿n trÃºc há»‡ thá»‘ng

### 5.1. SÆ¡ Ä‘á»“ tá»•ng quan

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        KIáº¾N TRÃšC Há»† THá»NG                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                         UI LAYER                                 â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚  â”‚ MainWindow   â”‚  â”‚ SettingsPanel â”‚  â”‚ PreviewWidget       â”‚  â”‚    â”‚
â”‚  â”‚  â”‚              â”‚  â”‚               â”‚  â”‚                     â”‚  â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ Menu       â”‚  â”‚ â€¢ Zones       â”‚  â”‚ â€¢ PDF preview       â”‚  â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ Toolbar    â”‚  â”‚ â€¢ Options     â”‚  â”‚ â€¢ Overlay regions   â”‚  â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ Status     â”‚  â”‚ â€¢ Protection  â”‚  â”‚ â€¢ Zone selection    â”‚  â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                    â”‚                                     â”‚
â”‚                                    â–¼                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                       CORE LAYER                                 â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚
â”‚  â”‚  â”‚    Processor      â”‚  â”‚        Zone Optimization            â”‚ â”‚    â”‚
â”‚  â”‚  â”‚                   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ process_pdf()   â”‚  â”‚  â”‚LayoutDetectâ”‚ â”‚HybridPolygon  â”‚  â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ process_page()  â”‚â—„â”€â”¼â”€â–ºâ”‚  or        â”‚ â”‚  Optimizer    â”‚  â”‚ â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ fill_zone()     â”‚  â”‚  â”‚(DocLayout- â”‚ â”‚               â”‚  â”‚ â”‚    â”‚
â”‚  â”‚  â”‚                   â”‚  â”‚  â”‚   YOLO)    â”‚ â”‚ â€¢ optimize()  â”‚  â”‚ â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚    â”‚
â”‚  â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚  â”‚   PDF Handler     â”‚  â”‚         Geometry Utils            â”‚  â”‚    â”‚
â”‚  â”‚  â”‚                   â”‚  â”‚                                   â”‚  â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ load_pdf()      â”‚  â”‚ â€¢ polygon_to_mask()              â”‚  â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ save_pdf()      â”‚  â”‚ â€¢ mask_to_polygon()              â”‚  â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ render_page()   â”‚  â”‚ â€¢ simplify_polygon()             â”‚  â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                    â”‚                                     â”‚
â”‚                                    â–¼                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                      MODEL LAYER                                 â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
â”‚  â”‚  â”‚                  DocLayout-YOLO                          â”‚    â”‚    â”‚
â”‚  â”‚  â”‚                                                          â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  Model: doclayout_yolo_docstructbench_imgsz1024.pt      â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  Framework: Ultralytics (YOLOv10)                        â”‚    â”‚    â”‚
â”‚  â”‚  â”‚  Device: GPU (CUDA) hoáº·c CPU                             â”‚    â”‚    â”‚
â”‚  â”‚  â”‚                                                          â”‚    â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2. Cáº¥u trÃºc thÆ° má»¥c

```
staple_remover/
â”‚
â”œâ”€â”€ core/                           # Logic xá»­ lÃ½ chÃ­nh
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ processor.py               # Xá»­ lÃ½ PDF vÃ  áº£nh
â”‚   â”œâ”€â”€ pdf_handler.py             # Äá»c/ghi PDF
â”‚   â”œâ”€â”€ layout_detector.py         # ğŸ†• Wrapper DocLayout-YOLO
â”‚   â””â”€â”€ zone_optimizer.py          # ğŸ†• Hybrid Polygon logic
â”‚
â”œâ”€â”€ ui/                             # Giao diá»‡n ngÆ°á»i dÃ¹ng
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ main_window.py             # Cá»­a sá»• chÃ­nh
â”‚   â”œâ”€â”€ settings_panel.py          # Panel cÃ i Ä‘áº·t
â”‚   â””â”€â”€ preview_widget.py          # Widget xem trÆ°á»›c
â”‚
â”œâ”€â”€ utils/                          # Tiá»‡n Ã­ch
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ geometry.py                # ğŸ†• Xá»­ lÃ½ hÃ¬nh há»c
â”‚
â”œâ”€â”€ models/                         # ğŸ†• Model weights
â”‚   â””â”€â”€ doclayout_yolo/
â”‚       â””â”€â”€ docstructbench.pt
â”‚
â”œâ”€â”€ resources/                      # TÃ i nguyÃªn
â”‚   â”œâ”€â”€ icons/
â”‚   â””â”€â”€ styles/
â”‚
â”œâ”€â”€ main.py                         # Entry point
â””â”€â”€ requirements.txt                # Dependencies
```

### 5.3. Luá»“ng dá»¯ liá»‡u chi tiáº¿t

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          LUá»’NG Dá»® LIá»†U                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  1. USER LOADS PDF                                                      â”‚
â”‚     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                    â”‚
â”‚     User â†’ Open PDF â†’ PDFHandler.load() â†’ List[Page]                    â”‚
â”‚                                                                          â”‚
â”‚  2. RENDER PAGE FOR PREVIEW                                             â”‚
â”‚     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                             â”‚
â”‚     Page â†’ render_page(dpi=150) â†’ numpy.ndarray (image)                 â”‚
â”‚                                                                          â”‚
â”‚  3. DETECT LAYOUT (if protection enabled)                               â”‚
â”‚     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                 â”‚
â”‚     image â†’ DocLayoutYOLO.detect() â†’ List[ProtectedRegion]              â”‚
â”‚                                                                          â”‚
â”‚     ProtectedRegion {                                                   â”‚
â”‚         bbox: (x1, y1, x2, y2)     # Tá»a Ä‘á»™ pixel                      â”‚
â”‚         label: "plain_text"         # Loáº¡i vÃ¹ng                         â”‚
â”‚         confidence: 0.95            # Äá»™ tin cáº­y                        â”‚
â”‚     }                                                                   â”‚
â”‚                                                                          â”‚
â”‚  4. USER SELECTS ZONES                                                  â”‚
â”‚     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                â”‚
â”‚     UI interaction â†’ List[Zone]                                         â”‚
â”‚                                                                          â”‚
â”‚     Zone {                                                              â”‚
â”‚         zone_type: "corner"         # corner/edge/custom                â”‚
â”‚         position: "top_left"        # Vá»‹ trÃ­                            â”‚
â”‚         bounds: (0, 0, 100, 100)    # KÃ­ch thÆ°á»›c                        â”‚
â”‚     }                                                                   â”‚
â”‚                                                                          â”‚
â”‚  5. OPTIMIZE ZONES                                                      â”‚
â”‚     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                    â”‚
â”‚     for zone in zones:                                                  â”‚
â”‚         safe_zones = HybridPolygonOptimizer.optimize(                   â”‚
â”‚             zone,                                                       â”‚
â”‚             protected_regions                                           â”‚
â”‚         ) â†’ List[SafeZone]                                              â”‚
â”‚                                                                          â”‚
â”‚     SafeZone {                                                          â”‚
â”‚         polygon: Shapely.Polygon    # HÃ¬nh dáº¡ng                         â”‚
â”‚         vertices: numpy.ndarray     # Äá»‰nh cho OpenCV                   â”‚
â”‚         coverage: 0.85              # 85% vÃ¹ng gá»‘c Ä‘Æ°á»£c giá»¯            â”‚
â”‚     }                                                                   â”‚
â”‚                                                                          â”‚
â”‚  6. FILL SAFE ZONES                                                     â”‚
â”‚     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                    â”‚
â”‚     for safe_zone in safe_zones:                                        â”‚
â”‚         background = detect_background_color(image, safe_zone.bbox)     â”‚
â”‚         cv2.fillPoly(image, [safe_zone.vertices], background)           â”‚
â”‚                                                                          â”‚
â”‚  7. SAVE RESULT                                                         â”‚
â”‚     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                         â”‚
â”‚     processed_image â†’ PDFHandler.save() â†’ output.pdf                    â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. Chi tiáº¿t thuáº­t toÃ¡n

### 6.1. Thuáº­t toÃ¡n Hybrid Polygon Optimizer

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               THUáº¬T TOÃN HYBRID POLYGON - 7 BÆ¯á»šC                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  INPUT:                                                                 â”‚
â”‚  â€¢ user_zone: Polygon (vÃ¹ng user chá»n)                                  â”‚
â”‚  â€¢ protected_regions: List[ProtectedRegion] (tá»« DocLayout-YOLO)        â”‚
â”‚  â€¢ margin: int = 5 (lá» an toÃ n, pixel)                                  â”‚
â”‚  â€¢ simplify_tolerance: float = 2.0 (Ä‘á»™ Ä‘Æ¡n giáº£n hÃ³a)                   â”‚
â”‚  â€¢ min_area: float = 100 (diá»‡n tÃ­ch tá»‘i thiá»ƒu, pixelÂ²)                 â”‚
â”‚                                                                          â”‚
â”‚  OUTPUT:                                                                â”‚
â”‚  â€¢ List[SafeZone] (cÃ¡c vÃ¹ng an toÃ n cÃ³ thá»ƒ xÃ³a)                        â”‚
â”‚                                                                          â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                          â”‚
â”‚  BÆ¯á»šC 1: FILTER RELEVANT REGIONS                                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                        â”‚
â”‚  relevant = []                                                          â”‚
â”‚  for region in protected_regions:                                       â”‚
â”‚      if user_zone.intersects(region.bbox):                              â”‚
â”‚          relevant.append(region)                                        â”‚
â”‚                                                                          â”‚
â”‚  if relevant is empty:                                                  â”‚
â”‚      return [SafeZone(user_zone)]  # KhÃ´ng cÃ³ text â†’ giá»¯ nguyÃªn        â”‚
â”‚                                                                          â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                          â”‚
â”‚  BÆ¯á»šC 2: APPLY BUFFER                                                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                    â”‚
â”‚  buffered = []                                                          â”‚
â”‚  for region in relevant:                                                â”‚
â”‚      polygon = box(region.x1, region.y1, region.x2, region.y2)         â”‚
â”‚      buffered_polygon = polygon.buffer(margin)                          â”‚
â”‚      buffered.append(buffered_polygon)                                  â”‚
â”‚                                                                          â”‚
â”‚  Giáº£i thÃ­ch: Buffer má»Ÿ rá»™ng vÃ¹ng báº£o vá»‡ thÃªm 'margin' pixel            â”‚
â”‚  Ä‘á»ƒ táº¡o khoáº£ng cÃ¡ch an toÃ n vá»›i text.                                   â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”  buffer(5)   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
â”‚  â”‚ TEXT â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â” â”‚                                    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”˜              â”‚ â”‚ TEXT â”‚ â”‚                                    â”‚
â”‚  60x20px               â”‚ â””â”€â”€â”€â”€â”€â”€â”˜ â”‚                                    â”‚
â”‚                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
â”‚                        70x30px (+5px má»—i hÆ°á»›ng)                        â”‚
â”‚                                                                          â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                          â”‚
â”‚  BÆ¯á»šC 3: UNION OVERLAPPING REGIONS                                      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                       â”‚
â”‚  protection_zone = unary_union(buffered)                                â”‚
â”‚                                                                          â”‚
â”‚  Giáº£i thÃ­ch: Gá»™p cÃ¡c vÃ¹ng báº£o vá»‡ chá»“ng láº¥n thÃ nh má»™t polygon           â”‚
â”‚  duy nháº¥t Ä‘á»ƒ Ä‘Æ¡n giáº£n hÃ³a phÃ©p trá»«.                                    â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                   â”‚
â”‚  â”‚ A  â”‚  â”‚ B  â”‚  union  â”‚          â”‚                                   â”‚
â”‚  â”‚   â”€â”¼â”€â”€â”¼â”€   â”‚ â”€â”€â”€â”€â”€â”€â–º â”‚   A âˆª B  â”‚                                   â”‚
â”‚  â””â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”˜         â”‚          â”‚                                   â”‚
â”‚                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                   â”‚
â”‚                                                                          â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                          â”‚
â”‚  BÆ¯á»šC 4: SUBTRACT FROM USER ZONE                                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                         â”‚
â”‚  safe_geometry = user_zone.difference(protection_zone)                  â”‚
â”‚                                                                          â”‚
â”‚  Giáº£i thÃ­ch: Loáº¡i bá» pháº§n chá»“ng láº¥n vá»›i vÃ¹ng báº£o vá»‡                    â”‚
â”‚  khá»i vÃ¹ng user muá»‘n xÃ³a.                                               â”‚
â”‚                                                                          â”‚
â”‚  User Zone       Protection      Result                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”   -   â”Œâ”€â”€â”€â”€â”    =   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚
â”‚  â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚       â”‚â–‘â–‘â–‘â–‘â”‚        â”‚â–ˆâ–ˆâ–ˆâ–ˆ    â”‚                             â”‚
â”‚  â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚       â”‚â–‘â–‘â–‘â–‘â”‚        â”‚â–ˆâ–ˆâ–ˆ     â”‚                             â”‚
â”‚  â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚       â””â”€â”€â”€â”€â”˜        â”‚â–ˆâ–ˆ      â”‚                             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                                                                          â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                          â”‚
â”‚  BÆ¯á»šC 5: HANDLE GEOMETRY TYPE                                           â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                            â”‚
â”‚  Káº¿t quáº£ cÃ³ thá»ƒ lÃ  nhiá»u loáº¡i geometry:                                â”‚
â”‚                                                                          â”‚
â”‚  if safe_geometry is Empty:                                             â”‚
â”‚      return []  # KhÃ´ng cÃ³ vÃ¹ng an toÃ n                                â”‚
â”‚                                                                          â”‚
â”‚  if safe_geometry is Polygon:                                           â”‚
â”‚      polygons = [safe_geometry]                                         â”‚
â”‚                                                                          â”‚
â”‚  if safe_geometry is MultiPolygon:                                      â”‚
â”‚      polygons = list(safe_geometry.geoms)                               â”‚
â”‚                                                                          â”‚
â”‚  if safe_geometry is GeometryCollection:                                â”‚
â”‚      polygons = [g for g in safe_geometry.geoms if is_polygon(g)]      â”‚
â”‚                                                                          â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                          â”‚
â”‚  BÆ¯á»šC 6: SIMPLIFY POLYGONS                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                               â”‚
â”‚  simplified = []                                                        â”‚
â”‚  for poly in polygons:                                                  â”‚
â”‚      simple = poly.simplify(tolerance, preserve_topology=True)          â”‚
â”‚      simplified.append(simple)                                          â”‚
â”‚                                                                          â”‚
â”‚  Giáº£i thÃ­ch: Giáº£m sá»‘ Ä‘á»‰nh cá»§a polygon Ä‘á»ƒ:                              â”‚
â”‚  - Render nhanh hÆ¡n                                                     â”‚
â”‚  - File nhá» hÆ¡n                                                         â”‚
â”‚  - TrÃ¡nh cÃ¡c Ä‘á»‰nh thá»«a do phÃ©p trá»« táº¡o ra                              â”‚
â”‚                                                                          â”‚
â”‚  â•”â•â•¤â•â•¤â•â•¤â•â•¤â•â•¤â•â•—  simplify   â•”â•â•â•â•â•â•â•â•â•â•â•â•—                               â”‚
â”‚  â• â•â•§â•â•§â•â•§â•â•§â•â•§â•â•£  â”€â”€â”€â”€â”€â”€â”€â”€â–º  â•‘           â•‘                               â”‚
â”‚  â•‘           â•‘             â•‘           â•‘                               â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•             â•šâ•â•â•â•â•â•â•â•â•â•â•â•                               â”‚
â”‚  20 vertices               6 vertices                                   â”‚
â”‚                                                                          â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•   â”‚
â”‚                                                                          â”‚
â”‚  BÆ¯á»šC 7: VALIDATE AND FILTER                                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                             â”‚
â”‚  valid_zones = []                                                       â”‚
â”‚  original_area = user_zone.area                                         â”‚
â”‚                                                                          â”‚
â”‚  for poly in simplified:                                                â”‚
â”‚      # Fix invalid geometry                                             â”‚
â”‚      if not poly.is_valid:                                              â”‚
â”‚          poly = poly.buffer(0)  # Self-intersection fix                â”‚
â”‚                                                                          â”‚
â”‚      # Skip tiny areas (noise)                                          â”‚
â”‚      if poly.area < min_area:                                           â”‚
â”‚          continue                                                       â”‚
â”‚                                                                          â”‚
â”‚      # Calculate coverage                                               â”‚
â”‚      coverage = poly.area / original_area                               â”‚
â”‚                                                                          â”‚
â”‚      # Create SafeZone                                                  â”‚
â”‚      safe_zone = SafeZone(                                              â”‚
â”‚          polygon = poly,                                                â”‚
â”‚          vertices = array(poly.exterior.coords),                        â”‚
â”‚          coverage = coverage                                            â”‚
â”‚      )                                                                  â”‚
â”‚      valid_zones.append(safe_zone)                                      â”‚
â”‚                                                                          â”‚
â”‚  return valid_zones                                                     â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2. Tá»‘i Æ°u cho tá»«ng loáº¡i Zone

#### 6.2.1. Zone GÃ³c (Corner)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Tá»I Æ¯U ZONE GÃ“C                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Äáº·c Ä‘iá»ƒm zone gÃ³c:                                         â”‚
â”‚  â€¢ ThÆ°á»ng cÃ³ ghim báº¥m, káº¹p giáº¥y                             â”‚
â”‚  â€¢ KÃ­ch thÆ°á»›c cá»‘ Ä‘á»‹nh (vÃ­ dá»¥: 100x100 pixel)                â”‚
â”‚  â€¢ CÃ³ thá»ƒ chá»©a logo, tiÃªu Ä‘á» náº¿u layout khÃ´ng chuáº©n        â”‚
â”‚                                                              â”‚
â”‚  Chiáº¿n lÆ°á»£c:                                                â”‚
â”‚  â€¢ Kiá»ƒm tra text gáº§n gÃ³c                                    â”‚
â”‚  â€¢ Táº¡o Ä‘Æ°á»ng cáº¯t chÃ©o tá»« gÃ³c Ä‘áº¿n biÃªn text                 â”‚
â”‚  â€¢ Giá»¯ láº¡i pháº§n tam giÃ¡c khÃ´ng chá»©a text                   â”‚
â”‚                                                              â”‚
â”‚  VÃ­ dá»¥ - GÃ³c trÃªn trÃ¡i cÃ³ text:                             â”‚
â”‚                                                              â”‚
â”‚  TrÆ°á»›c                          Sau                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚            â”‚â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“    â”‚           â”‚
â”‚  â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚            â”‚â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“     â”‚           â”‚
â”‚  â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”Œâ”€â”€â”€â”€â”€â”€â”â”‚            â”‚â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â”Œâ”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ”‚ LOGO â”‚â”‚â”‚            â”‚â–“â–“â–“â–“â–“â–“â–“â–“â–“ â”‚ LOGO â”‚â”‚          â”‚
â”‚  â”‚â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ””â”€â”€â”€â”€â”€â”€â”˜â”‚            â”‚â–“â–“â–“â–“â–“â–“â–“â–“  â””â”€â”€â”€â”€â”€â”€â”˜â”‚          â”‚
â”‚  â”‚                â”‚            â”‚                  â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚  â–ˆ = VÃ¹ng Ä‘á»‹nh xÃ³a             â–“ = VÃ¹ng thá»±c sá»± xÃ³a         â”‚
â”‚  LOGO = Bá»‹ xÃ³a máº¥t âœ—           LOGO = ÄÆ°á»£c báº£o vá»‡ âœ“         â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 6.2.2. Zone Cáº¡nh (Edge/Margin)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Tá»I Æ¯U ZONE Cáº NH                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Äáº·c Ä‘iá»ƒm zone cáº¡nh:                                        â”‚
â”‚  â€¢ Cháº¡y dá»c toÃ n bá»™ chiá»u dÃ i/rá»™ng trang                    â”‚
â”‚  â€¢ ThÆ°á»ng cÃ³ váº¿t báº©n, lá»— Ä‘á»¥c                                â”‚
â”‚  â€¢ CÃ³ thá»ƒ chá»©a chÃº thÃ­ch, sá»‘ trang, header/footer          â”‚
â”‚                                                              â”‚
â”‚  Chiáº¿n lÆ°á»£c:                                                â”‚
â”‚  â€¢ Scan toÃ n bá»™ cáº¡nh tÃ¬m text blocks                       â”‚
â”‚  â€¢ Äiá»u chá»‰nh Ä‘á»™ dÃ y cáº¡nh theo khoáº£ng cÃ¡ch text            â”‚
â”‚  â€¢ CÃ³ thá»ƒ táº¡o nhiá»u rectangle vá»›i Ä‘á»™ dÃ y khÃ¡c nhau         â”‚
â”‚                                                              â”‚
â”‚  VÃ­ dá»¥ - Cáº¡nh trÃ¡i vá»›i text á»Ÿ nhiá»u vá»‹ trÃ­:                â”‚
â”‚                                                              â”‚
â”‚  TrÆ°á»›c (Ä‘á»“ng nháº¥t)             Sau (thÃ­ch á»©ng)              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚â–ˆâ–ˆâ–ˆâ–ˆâ”‚            â”‚          â”‚â–“â–“â”‚              â”‚           â”‚
â”‚  â”‚â–ˆâ–ˆâ–ˆâ–ˆâ”‚ TEXT A     â”‚          â”‚â–“â–“â”‚ TEXT A       â”‚           â”‚
â”‚  â”‚â–ˆâ–ˆâ–ˆâ–ˆâ”‚            â”‚          â”‚â–“â–“â–“â–“            â”‚           â”‚
â”‚  â”‚â–ˆâ–ˆâ–ˆâ–ˆâ”‚            â”‚          â”‚â–“â–“â–“â–“            â”‚           â”‚
â”‚  â”‚â–ˆâ–ˆâ–ˆâ–ˆâ”‚      TEXT Bâ”‚          â”‚â–“â–“â–“â–“â–“â–“    TEXT Bâ”‚           â”‚
â”‚  â”‚â–ˆâ–ˆâ–ˆâ–ˆâ”‚            â”‚          â”‚â–“â–“â–“â–“            â”‚           â”‚
â”‚  â”‚â–ˆâ–ˆâ–ˆâ–ˆâ”‚ TEXT C     â”‚          â”‚â–“â–“â”‚ TEXT C       â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚  Äá»™ dÃ y = 50px Ä‘á»u            Äá»™ dÃ y thay Ä‘á»•i theo text    â”‚
â”‚  TEXT A,C bá»‹ cáº¯t âœ—            Táº¥t cáº£ text Ä‘Æ°á»£c báº£o vá»‡ âœ“    â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 6.2.3. Zone TÃ¹y chá»n (Custom)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Tá»I Æ¯U ZONE TÃ™Y CHá»ŒN                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  Äáº·c Ä‘iá»ƒm zone tÃ¹y chá»n:                                    â”‚
â”‚  â€¢ User tá»± váº½ vÃ¹ng báº¥t ká»³                                   â”‚
â”‚  â€¢ CÃ³ thá»ƒ lÃ  rectangle, polygon phá»©c táº¡p                   â”‚
â”‚  â€¢ DÃ¹ng cho cÃ¡c trÆ°á»ng há»£p Ä‘áº·c biá»‡t                        â”‚
â”‚                                                              â”‚
â”‚  Chiáº¿n lÆ°á»£c:                                                â”‚
â”‚  â€¢ DÃ¹ng phÃ©p trá»« polygon trá»±c tiáº¿p                         â”‚
â”‚  â€¢ Giá»¯ nguyÃªn hÃ¬nh dáº¡ng gá»‘c náº¿u khÃ´ng cÃ³ text              â”‚
â”‚  â€¢ Táº¡o "lá»— há»•ng" náº¿u cÃ³ text á»Ÿ giá»¯a                        â”‚
â”‚                                                              â”‚
â”‚  VÃ­ dá»¥ - VÃ¹ng tÃ¹y chá»n chá»©a text:                          â”‚
â”‚                                                              â”‚
â”‚  TrÆ°á»›c                          Sau                          â”‚
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—            â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—           â”‚
â”‚  â•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘            â•‘â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â•‘           â”‚
â”‚  â•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘            â•‘â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â•‘           â”‚
â”‚  â•‘â–ˆâ–ˆâ–ˆâ–ˆâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â–ˆâ–ˆâ•‘            â•‘â–“â–“â–“â–“â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”â–“â–“â•‘           â”‚
â”‚  â•‘â–ˆâ–ˆâ–ˆâ–ˆâ”‚WATERMARKâ”‚â”‚â–ˆâ–ˆâ•‘            â•‘â–“â–“â–“â–“â”‚WATERMARK â”‚â”‚â–“â–“â•‘           â”‚
â”‚  â•‘â–ˆâ–ˆâ–ˆâ–ˆâ””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â–ˆâ–ˆâ•‘            â•‘â–“â–“â–“â–“â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜â–“â–“â•‘           â”‚
â”‚  â•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘            â•‘â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â•‘           â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•            â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•           â”‚
â”‚  WATERMARK = Bá»‹ xÃ³a âœ—          WATERMARK = Táº¡o lá»— há»•ng     â”‚
â”‚                                 (Ä‘Æ°á»£c báº£o vá»‡) âœ“             â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. TÃ­ch há»£p vÃ o á»©ng dá»¥ng

### 7.1. CÃ¡c file cáº§n táº¡o má»›i

#### 7.1.1. `core/layout_detector.py`

```python
"""
Layout Detector - Wrapper cho DocLayout-YOLO

Chá»©c nÄƒng:
- Load model DocLayout-YOLO tá»« HuggingFace
- Detect cÃ¡c vÃ¹ng layout trong áº£nh tÃ i liá»‡u
- Return danh sÃ¡ch ProtectedRegion
"""

from dataclasses import dataclass
from typing import List, Tuple, Optional
import numpy as np

@dataclass
class ProtectedRegion:
    """VÃ¹ng cáº§n báº£o vá»‡ khÃ´ng Ä‘Æ°á»£c xÃ³a"""
    bbox: Tuple[int, int, int, int]  # (x1, y1, x2, y2)
    label: str                        # 'plain_text', 'table', ...
    confidence: float                 # 0.0 - 1.0
    
    def to_shapely(self):
        """Convert sang Shapely Polygon"""
        from shapely.geometry import box
        return box(self.bbox[0], self.bbox[1], 
                   self.bbox[2], self.bbox[3])


class DocLayoutYOLO:
    """Wrapper cho DocLayout-YOLO model"""
    
    # CÃ¡c label cáº§n báº£o vá»‡ máº·c Ä‘á»‹nh
    DEFAULT_PROTECTED_LABELS = {
        'title', 'plain_text', 'table', 'table_caption',
        'table_footnote', 'figure_caption', 'isolate_formula',
        'formula_caption'
    }
    
    def __init__(self, 
                 model_path: Optional[str] = None,
                 device: str = 'auto',
                 confidence_threshold: float = 0.5):
        """
        Khá»Ÿi táº¡o DocLayout-YOLO detector.
        
        Args:
            model_path: ÄÆ°á»ng dáº«n model (None = auto download)
            device: 'auto', 'cuda', 'cpu'
            confidence_threshold: NgÆ°á»¡ng confidence (0-1)
        """
        self.confidence_threshold = confidence_threshold
        self.model = None
        self.device = device
        self._model_path = model_path
        
    def _load_model(self):
        """Lazy load model khi cáº§n"""
        if self.model is not None:
            return
            
        from huggingface_hub import hf_hub_download
        from ultralytics import YOLOv10
        
        # Download model náº¿u chÆ°a cÃ³
        if self._model_path is None:
            self._model_path = hf_hub_download(
                repo_id="juliozhao/DocLayout-YOLO-DocStructBench",
                filename="doclayout_yolo_docstructbench_imgsz1024.pt"
            )
        
        # Load model
        self.model = YOLOv10(self._model_path)
        
        # Set device
        if self.device == 'auto':
            import torch
            self.device = 'cuda' if torch.cuda.is_available() else 'cpu'
        
    def detect(self, 
               image: np.ndarray,
               protected_labels: Optional[set] = None
               ) -> List[ProtectedRegion]:
        """
        PhÃ¡t hiá»‡n cÃ¡c vÃ¹ng layout trong áº£nh.
        
        Args:
            image: áº¢nh numpy array (BGR hoáº·c RGB)
            protected_labels: Set cÃ¡c label cáº§n báº£o vá»‡
                            (None = dÃ¹ng default)
        
        Returns:
            Danh sÃ¡ch ProtectedRegion
        """
        self._load_model()
        
        if protected_labels is None:
            protected_labels = self.DEFAULT_PROTECTED_LABELS
        
        # Run inference
        results = self.model.predict(
            image,
            imgsz=1024,
            conf=self.confidence_threshold,
            device=self.device,
            verbose=False
        )
        
        # Extract regions
        regions = []
        for result in results:
            boxes = result.boxes
            for box in boxes:
                # Get coordinates
                x1, y1, x2, y2 = box.xyxy[0].tolist()
                conf = box.conf[0].item()
                cls_id = int(box.cls[0].item())
                label = self.model.names[cls_id]
                
                # Filter by label
                if label not in protected_labels:
                    continue
                
                region = ProtectedRegion(
                    bbox=(int(x1), int(y1), int(x2), int(y2)),
                    label=label,
                    confidence=conf
                )
                regions.append(region)
        
        return regions
    
    def batch_detect(self, 
                     images: List[np.ndarray]
                     ) -> List[List[ProtectedRegion]]:
        """Detect nhiá»u áº£nh cÃ¹ng lÃºc (batch processing)"""
        self._load_model()
        
        all_results = []
        # Process in batches
        results = self.model.predict(
            images,
            imgsz=1024,
            conf=self.confidence_threshold,
            device=self.device,
            verbose=False
        )
        
        for result in results:
            regions = []
            boxes = result.boxes
            for box in boxes:
                x1, y1, x2, y2 = box.xyxy[0].tolist()
                conf = box.conf[0].item()
                cls_id = int(box.cls[0].item())
                label = self.model.names[cls_id]
                
                if label not in self.DEFAULT_PROTECTED_LABELS:
                    continue
                    
                region = ProtectedRegion(
                    bbox=(int(x1), int(y1), int(x2), int(y2)),
                    label=label,
                    confidence=conf
                )
                regions.append(region)
            all_results.append(regions)
        
        return all_results
```

#### 7.1.2. `core/zone_optimizer.py`

```python
"""
Zone Optimizer - Hybrid Polygon Method

Chá»©c nÄƒng:
- Nháº­n vÃ¹ng user muá»‘n xÃ³a vÃ  vÃ¹ng cáº§n báº£o vá»‡
- TÃ­nh toÃ¡n vÃ¹ng an toÃ n cÃ³ thá»ƒ xÃ³a
- Xá»­ lÃ½ cÃ¡c trÆ°á»ng há»£p Ä‘áº·c biá»‡t
"""

from dataclasses import dataclass
from typing import List, Tuple, Optional, Union
import numpy as np

from shapely.geometry import Polygon, MultiPolygon, box, GeometryCollection
from shapely.ops import unary_union

from .layout_detector import ProtectedRegion


@dataclass
class Zone:
    """VÃ¹ng ngÆ°á»i dÃ¹ng chá»n Ä‘á»ƒ xÃ³a"""
    zone_type: str          # 'corner', 'edge', 'custom'
    bounds: Tuple[int, int, int, int]  # (x1, y1, x2, y2)
    position: Optional[str] = None     # 'top_left', 'left', etc.
    polygon: Optional[Polygon] = None  # For custom zones
    
    def to_shapely(self) -> Polygon:
        """Convert sang Shapely Polygon"""
        if self.polygon is not None:
            return self.polygon
        return box(self.bounds[0], self.bounds[1],
                   self.bounds[2], self.bounds[3])


@dataclass 
class SafeZone:
    """VÃ¹ng an toÃ n cÃ³ thá»ƒ xÃ³a (sau khi tá»‘i Æ°u)"""
    polygon: Polygon            # Shapely polygon
    vertices: np.ndarray        # Máº£ng Ä‘á»‰nh cho OpenCV
    bbox: Tuple[float, ...]     # Bounding box
    area: float                 # Diá»‡n tÃ­ch (pixelÂ²)
    zone_type: str              # Loáº¡i zone gá»‘c
    original_zone: Zone         # Zone gá»‘c tá»« user
    coverage: float             # Tá»· lá»‡ giá»¯ láº¡i (0-1)
    
    def to_opencv_contour(self) -> np.ndarray:
        """Convert sang contour cho cv2.fillPoly"""
        return self.vertices.reshape((-1, 1, 2)).astype(np.int32)
    
    def to_mask(self, shape: Tuple[int, int]) -> np.ndarray:
        """Táº¡o binary mask"""
        import cv2
        mask = np.zeros(shape[:2], dtype=np.uint8)
        cv2.fillPoly(mask, [self.to_opencv_contour()], 255)
        return mask


class HybridPolygonOptimizer:
    """
    Tá»‘i Æ°u hÃ³a vÃ¹ng xÃ³a báº±ng phÆ°Æ¡ng phÃ¡p Hybrid Polygon.
    
    Workflow:
    1. Filter relevant protected regions
    2. Apply buffer (margin) to regions
    3. Union overlapping regions
    4. Subtract from user zone
    5. Simplify result polygon
    6. Validate and clean
    """
    
    def __init__(self,
                 margin: int = 5,
                 simplify_tolerance: float = 2.0,
                 min_area: float = 100.0,
                 preserve_topology: bool = True):
        """
        Khá»Ÿi táº¡o optimizer.
        
        Args:
            margin: Lá» an toÃ n quanh vÃ¹ng báº£o vá»‡ (pixel)
            simplify_tolerance: Äá»™ Ä‘Æ¡n giáº£n hÃ³a polygon
            min_area: Diá»‡n tÃ­ch tá»‘i thiá»ƒu cá»§a safe zone (pixelÂ²)
            preserve_topology: Giá»¯ topology khi simplify
        """
        self.margin = margin
        self.simplify_tolerance = simplify_tolerance
        self.min_area = min_area
        self.preserve_topology = preserve_topology
    
    def optimize(self,
                 user_zone: Zone,
                 protected_regions: List[ProtectedRegion]
                 ) -> List[SafeZone]:
        """
        Tá»‘i Æ°u hÃ³a vÃ¹ng xÃ³a.
        
        Args:
            user_zone: VÃ¹ng ngÆ°á»i dÃ¹ng muá»‘n xÃ³a
            protected_regions: Danh sÃ¡ch vÃ¹ng cáº§n báº£o vá»‡
            
        Returns:
            Danh sÃ¡ch SafeZone cÃ³ thá»ƒ xÃ³a an toÃ n
        """
        # Step 1: Convert user zone to Shapely polygon
        user_polygon = user_zone.to_shapely()
        original_area = user_polygon.area
        
        # Step 2: Filter relevant regions (cÃ³ intersection)
        relevant = self._filter_relevant(user_polygon, protected_regions)
        
        # KhÃ´ng cÃ³ text trong zone â†’ giá»¯ nguyÃªn
        if not relevant:
            return [self._create_safe_zone(
                user_polygon, user_zone, coverage=1.0
            )]
        
        # Step 3: Apply buffer to each region
        buffered = [
            region.to_shapely().buffer(self.margin)
            for region in relevant
        ]
        
        # Step 4: Union all buffered regions
        protection_zone = unary_union(buffered)
        
        # Step 5: Subtract protection from user zone
        safe_geometry = user_polygon.difference(protection_zone)
        
        # Step 6: Handle geometry type
        safe_polygons = self._extract_polygons(safe_geometry)
        
        # Step 7: Simplify each polygon
        simplified = [
            poly.simplify(self.simplify_tolerance, 
                         preserve_topology=self.preserve_topology)
            for poly in safe_polygons
        ]
        
        # Step 8: Validate and filter
        valid_polygons = self._validate_polygons(simplified)
        
        # Step 9: Convert to SafeZone objects
        safe_zones = []
        for poly in valid_polygons:
            coverage = poly.area / original_area
            safe_zone = self._create_safe_zone(poly, user_zone, coverage)
            safe_zones.append(safe_zone)
        
        return safe_zones
    
    def _filter_relevant(self,
                         user_polygon: Polygon,
                         regions: List[ProtectedRegion]
                         ) -> List[ProtectedRegion]:
        """Lá»c cÃ¡c region cÃ³ intersection vá»›i user zone"""
        relevant = []
        for region in regions:
            region_poly = region.to_shapely()
            if user_polygon.intersects(region_poly):
                relevant.append(region)
        return relevant
    
    def _extract_polygons(self, 
                          geometry) -> List[Polygon]:
        """Extract polygons tá»« geometry result"""
        if geometry.is_empty:
            return []
        
        if isinstance(geometry, Polygon):
            return [geometry]
        
        if isinstance(geometry, MultiPolygon):
            return list(geometry.geoms)
        
        if isinstance(geometry, GeometryCollection):
            return [g for g in geometry.geoms 
                    if isinstance(g, Polygon)]
        
        return []
    
    def _validate_polygons(self, 
                           polygons: List[Polygon]
                           ) -> List[Polygon]:
        """Validate vÃ  clean polygons"""
        valid = []
        for poly in polygons:
            # Fix invalid geometry
            if not poly.is_valid:
                poly = poly.buffer(0)
            
            # Skip tiny areas
            if poly.area < self.min_area:
                continue
            
            # Skip if still invalid
            if not poly.is_valid or poly.is_empty:
                continue
            
            valid.append(poly)
        
        return valid
    
    def _create_safe_zone(self,
                          polygon: Polygon,
                          original_zone: Zone,
                          coverage: float) -> SafeZone:
        """Táº¡o SafeZone object tá»« polygon"""
        # Get exterior coordinates (bá» Ä‘iá»ƒm cuá»‘i trÃ¹ng Ä‘iá»ƒm Ä‘áº§u)
        coords = np.array(polygon.exterior.coords[:-1], dtype=np.int32)
        
        return SafeZone(
            polygon=polygon,
            vertices=coords,
            bbox=polygon.bounds,
            area=polygon.area,
            zone_type=original_zone.zone_type,
            original_zone=original_zone,
            coverage=coverage
        )
    
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    # SPECIALIZED METHODS FOR EACH ZONE TYPE
    # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    def optimize_corner(self,
                        corner_zone: Zone,
                        protected_regions: List[ProtectedRegion]
                        ) -> List[SafeZone]:
        """
        Tá»‘i Æ°u Ä‘áº·c biá»‡t cho zone gÃ³c.
        Táº¡o Ä‘Æ°á»ng cáº¯t chÃ©o náº¿u cáº§n.
        """
        # DÃ¹ng method chung, cÃ³ thá»ƒ override náº¿u cáº§n logic Ä‘áº·c biá»‡t
        return self.optimize(corner_zone, protected_regions)
    
    def optimize_edge(self,
                      edge_zone: Zone,
                      protected_regions: List[ProtectedRegion]
                      ) -> List[SafeZone]:
        """
        Tá»‘i Æ°u Ä‘áº·c biá»‡t cho zone cáº¡nh.
        Äiá»u chá»‰nh Ä‘á»™ dÃ y theo vá»‹ trÃ­ text.
        """
        # DÃ¹ng method chung, cÃ³ thá»ƒ override náº¿u cáº§n logic Ä‘áº·c biá»‡t
        return self.optimize(edge_zone, protected_regions)
    
    def optimize_custom(self,
                        custom_zone: Zone,
                        protected_regions: List[ProtectedRegion]
                        ) -> List[SafeZone]:
        """
        Tá»‘i Æ°u cho zone tÃ¹y chá»n (polygon báº¥t ká»³).
        """
        return self.optimize(custom_zone, protected_regions)
```

#### 7.1.3. `utils/geometry.py`

```python
"""
Geometry Utilities

CÃ¡c hÃ m tiá»‡n Ã­ch xá»­ lÃ½ hÃ¬nh há»c cho viá»‡c:
- Convert giá»¯a cÃ¡c Ä‘á»‹nh dáº¡ng polygon
- Táº¡o mask tá»« polygon
- Xá»­ lÃ½ contour
"""

import numpy as np
import cv2
from typing import List, Tuple, Optional
from shapely.geometry import Polygon


def polygon_to_mask(polygon: Polygon, 
                    shape: Tuple[int, int]) -> np.ndarray:
    """
    Convert Shapely Polygon sang binary mask.
    
    Args:
        polygon: Shapely Polygon object
        shape: (height, width) cá»§a mask output
        
    Returns:
        Binary mask (0 hoáº·c 255)
    """
    mask = np.zeros(shape, dtype=np.uint8)
    
    if polygon.is_empty:
        return mask
    
    # Get exterior coordinates
    coords = np.array(polygon.exterior.coords[:-1], dtype=np.int32)
    contour = coords.reshape((-1, 1, 2))
    
    # Fill polygon
    cv2.fillPoly(mask, [contour], 255)
    
    # Handle holes (interior rings)
    for interior in polygon.interiors:
        hole_coords = np.array(interior.coords[:-1], dtype=np.int32)
        hole_contour = hole_coords.reshape((-1, 1, 2))
        cv2.fillPoly(mask, [hole_contour], 0)
    
    return mask


def mask_to_polygon(mask: np.ndarray,
                    simplify: bool = True,
                    tolerance: float = 2.0) -> Optional[Polygon]:
    """
    Convert binary mask sang Shapely Polygon.
    
    Args:
        mask: Binary mask (0/255)
        simplify: CÃ³ Ä‘Æ¡n giáº£n hÃ³a polygon khÃ´ng
        tolerance: Äá»™ tolerance khi simplify
        
    Returns:
        Shapely Polygon hoáº·c None náº¿u mask rá»—ng
    """
    # Find contours
    contours, _ = cv2.findContours(
        mask, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE
    )
    
    if not contours:
        return None
    
    # Get largest contour
    contour = max(contours, key=cv2.contourArea)
    
    # Convert to polygon coordinates
    coords = contour.reshape(-1, 2).tolist()
    
    if len(coords) < 3:
        return None
    
    # Create polygon
    polygon = Polygon(coords)
    
    # Simplify if requested
    if simplify:
        polygon = polygon.simplify(tolerance, preserve_topology=True)
    
    return polygon if polygon.is_valid else polygon.buffer(0)


def rect_to_polygon(rect: Tuple[int, int, int, int]) -> Polygon:
    """
    Convert rectangle (x1, y1, x2, y2) sang Polygon.
    """
    x1, y1, x2, y2 = rect
    return Polygon([(x1, y1), (x2, y1), (x2, y2), (x1, y2)])


def polygon_to_contour(polygon: Polygon) -> np.ndarray:
    """
    Convert Shapely Polygon sang OpenCV contour.
    
    Returns:
        Contour array cÃ³ shape (N, 1, 2)
    """
    coords = np.array(polygon.exterior.coords[:-1], dtype=np.int32)
    return coords.reshape((-1, 1, 2))


def calculate_intersection_area(poly1: Polygon, 
                                poly2: Polygon) -> float:
    """TÃ­nh diá»‡n tÃ­ch pháº§n giao cá»§a 2 polygon"""
    if not poly1.intersects(poly2):
        return 0.0
    intersection = poly1.intersection(poly2)
    return intersection.area


def calculate_overlap_ratio(poly1: Polygon, 
                            poly2: Polygon) -> float:
    """
    TÃ­nh tá»· lá»‡ overlap cá»§a poly1 vá»›i poly2.
    
    Returns:
        Tá»· lá»‡ (0-1) pháº§n poly1 náº±m trong poly2
    """
    if poly1.area == 0:
        return 0.0
    intersection_area = calculate_intersection_area(poly1, poly2)
    return intersection_area / poly1.area
```

### 7.2. Sá»­a Ä‘á»•i file hiá»‡n cÃ³

#### 7.2.1. Sá»­a `core/processor.py`

```python
"""
Processor - ThÃªm tÃ­ch há»£p text protection

CÃ¡c thay Ä‘á»•i:
1. ThÃªm DocLayoutYOLO detector
2. ThÃªm HybridPolygonOptimizer
3. ThÃªm method process vá»›i protection
"""

# ThÃªm imports
from .layout_detector import DocLayoutYOLO, ProtectedRegion
from .zone_optimizer import HybridPolygonOptimizer, Zone, SafeZone

class StapleRemoverProcessor:
    
    def __init__(self):
        # ... existing code ...
        
        # === THÃŠM Má»šI ===
        self.layout_detector: Optional[DocLayoutYOLO] = None
        self.zone_optimizer = HybridPolygonOptimizer()
        self.enable_text_protection = False
        self.text_protection_options = {
            'margin': 5,
            'confidence_threshold': 0.5,
            'protected_labels': None  # None = default
        }
    
    def set_text_protection(self, 
                            enabled: bool, 
                            **options):
        """
        Báº­t/táº¯t cháº¿ Ä‘á»™ báº£o vá»‡ text.
        
        Args:
            enabled: True Ä‘á»ƒ báº­t
            **options: CÃ¡c tÃ¹y chá»n
                - margin: Lá» an toÃ n (pixel)
                - confidence_threshold: NgÆ°á»¡ng confidence
                - protected_labels: Set cÃ¡c label cáº§n báº£o vá»‡
        """
        self.enable_text_protection = enabled
        
        # Update options
        self.text_protection_options.update(options)
        
        # Load model náº¿u báº­t vÃ  chÆ°a load
        if enabled and self.layout_detector is None:
            self.layout_detector = DocLayoutYOLO(
                confidence_threshold=self.text_protection_options.get(
                    'confidence_threshold', 0.5
                )
            )
        
        # Update optimizer margin
        self.zone_optimizer.margin = self.text_protection_options.get(
            'margin', 5
        )
    
    def get_protected_regions(self, 
                              page_image: np.ndarray
                              ) -> List[ProtectedRegion]:
        """
        Láº¥y danh sÃ¡ch vÃ¹ng cáº§n báº£o vá»‡ trong trang.
        
        Args:
            page_image: áº¢nh trang (numpy array)
            
        Returns:
            Danh sÃ¡ch ProtectedRegion
        """
        if not self.enable_text_protection:
            return []
        
        if self.layout_detector is None:
            return []
        
        return self.layout_detector.detect(
            page_image,
            protected_labels=self.text_protection_options.get(
                'protected_labels'
            )
        )
    
    def process_page(self, 
                     page_image: np.ndarray, 
                     zones: List[Zone]) -> np.ndarray:
        """
        Xá»­ lÃ½ má»™t trang PDF.
        
        Args:
            page_image: áº¢nh trang (numpy array)
            zones: Danh sÃ¡ch vÃ¹ng cáº§n xÃ³a
            
        Returns:
            áº¢nh Ä‘Ã£ xá»­ lÃ½
        """
        # Copy Ä‘á»ƒ khÃ´ng modify áº£nh gá»‘c
        result = page_image.copy()
        
        # === THÃŠM Má»šI: Get protected regions ===
        protected_regions = []
        if self.enable_text_protection:
            protected_regions = self.get_protected_regions(page_image)
        
        # Process each zone
        for zone in zones:
            if self.enable_text_protection and protected_regions:
                # === THÃŠM Má»šI: Optimize zone ===
                safe_zones = self.zone_optimizer.optimize(
                    zone, protected_regions
                )
                
                # Fill each safe zone
                for safe_zone in safe_zones:
                    self._fill_safe_zone(result, safe_zone)
            else:
                # Original behavior (khÃ´ng cÃ³ protection)
                self._fill_zone(result, zone)
        
        return result
    
    def _fill_safe_zone(self, 
                        image: np.ndarray, 
                        safe_zone: SafeZone):
        """
        Fill má»™t SafeZone vá»›i background color.
        
        Args:
            image: áº¢nh Ä‘á»ƒ fill (modified in place)
            safe_zone: SafeZone cáº§n fill
        """
        # Detect background color trong vÃ¹ng
        bg_color = self._detect_background_color(
            image, safe_zone.bbox
        )
        
        # Fill polygon
        contour = safe_zone.to_opencv_contour()
        cv2.fillPoly(image, [contour], bg_color)
    
    def _fill_zone(self, 
                   image: np.ndarray, 
                   zone: Zone):
        """
        Fill má»™t Zone thÃ´ng thÆ°á»ng (khÃ´ng cÃ³ protection).
        
        Args:
            image: áº¢nh Ä‘á»ƒ fill (modified in place)
            zone: Zone cáº§n fill
        """
        x1, y1, x2, y2 = zone.bounds
        
        # Detect background color
        bg_color = self._detect_background_color(image, zone.bounds)
        
        # Fill rectangle
        cv2.rectangle(image, (x1, y1), (x2, y2), bg_color, -1)
    
    def _detect_background_color(self, 
                                 image: np.ndarray,
                                 bbox: Tuple) -> Tuple[int, ...]:
        """
        PhÃ¡t hiá»‡n mÃ u background trong vÃ¹ng.
        
        Sá»­ dá»¥ng mÃ u phá»• biáº¿n nháº¥t á»Ÿ biÃªn vÃ¹ng.
        """
        x1, y1, x2, y2 = [int(v) for v in bbox]
        
        # Láº¥y pixels á»Ÿ biÃªn
        border_pixels = []
        
        # Top edge
        if y1 > 0:
            border_pixels.extend(image[y1-1, x1:x2].tolist())
        # Bottom edge
        if y2 < image.shape[0]:
            border_pixels.extend(image[y2, x1:x2].tolist())
        # Left edge
        if x1 > 0:
            border_pixels.extend(image[y1:y2, x1-1].tolist())
        # Right edge
        if x2 < image.shape[1]:
            border_pixels.extend(image[y1:y2, x2].tolist())
        
        if not border_pixels:
            # Fallback: white
            return (255, 255, 255) if len(image.shape) == 3 else 255
        
        # TÃ­nh mÃ u trung bÃ¬nh
        border_array = np.array(border_pixels)
        avg_color = np.mean(border_array, axis=0).astype(int)
        
        return tuple(avg_color.tolist())
```

#### 7.2.2. Sá»­a `ui/settings_panel.py`

```python
# ThÃªm section Text Protection vÃ o settings panel

class SettingsPanel(QWidget):
    # ... existing code ...
    
    def _create_text_protection_section(self) -> QGroupBox:
        """Táº¡o section báº£o vá»‡ vÄƒn báº£n"""
        group = QGroupBox("Báº£o vá»‡ vÃ¹ng vÄƒn báº£n")
        layout = QVBoxLayout(group)
        
        # Enable checkbox
        self.chk_text_protection = QCheckBox(
            "Báº­t báº£o vá»‡ vÄƒn báº£n (DocLayout-YOLO)"
        )
        self.chk_text_protection.setToolTip(
            "Tá»± Ä‘á»™ng phÃ¡t hiá»‡n vÃ  báº£o vá»‡ vÃ¹ng cÃ³ vÄƒn báº£n "
            "khá»i bá»‹ xÃ³a nháº§m"
        )
        layout.addWidget(self.chk_text_protection)
        
        # Options container (áº©n khi táº¯t)
        self.text_protection_options = QWidget()
        options_layout = QFormLayout(self.text_protection_options)
        
        # Protected labels
        self.chk_protect_text = QCheckBox("VÄƒn báº£n")
        self.chk_protect_text.setChecked(True)
        self.chk_protect_table = QCheckBox("Báº£ng")
        self.chk_protect_table.setChecked(True)
        self.chk_protect_figure = QCheckBox("HÃ¬nh áº£nh")
        self.chk_protect_figure.setChecked(False)
        
        labels_layout = QHBoxLayout()
        labels_layout.addWidget(self.chk_protect_text)
        labels_layout.addWidget(self.chk_protect_table)
        labels_layout.addWidget(self.chk_protect_figure)
        options_layout.addRow("Báº£o vá»‡:", labels_layout)
        
        # Margin slider
        self.slider_margin = QSlider(Qt.Orientation.Horizontal)
        self.slider_margin.setRange(0, 20)
        self.slider_margin.setValue(5)
        self.lbl_margin = QLabel("5 px")
        
        margin_layout = QHBoxLayout()
        margin_layout.addWidget(self.slider_margin)
        margin_layout.addWidget(self.lbl_margin)
        options_layout.addRow("Lá» an toÃ n:", margin_layout)
        
        # Confidence threshold
        self.slider_confidence = QSlider(Qt.Orientation.Horizontal)
        self.slider_confidence.setRange(10, 90)
        self.slider_confidence.setValue(50)
        self.lbl_confidence = QLabel("0.5")
        
        conf_layout = QHBoxLayout()
        conf_layout.addWidget(self.slider_confidence)
        conf_layout.addWidget(self.lbl_confidence)
        options_layout.addRow("Äá»™ tin cáº­y:", conf_layout)
        
        layout.addWidget(self.text_protection_options)
        self.text_protection_options.setVisible(False)
        
        # Connect signals
        self.chk_text_protection.toggled.connect(
            self.text_protection_options.setVisible
        )
        self.slider_margin.valueChanged.connect(
            lambda v: self.lbl_margin.setText(f"{v} px")
        )
        self.slider_confidence.valueChanged.connect(
            lambda v: self.lbl_confidence.setText(f"{v/100:.2f}")
        )
        
        return group
```

### 7.3. Dependencies cáº§n thÃªm

```
# ThÃªm vÃ o requirements.txt

# Geometry processing
shapely>=2.0.0              # Polygon operations
rtree>=1.0.0                # Spatial indexing (tÃ¹y chá»n)

# DocLayout-YOLO  
ultralytics>=8.0.0          # YOLOv10 framework
huggingface_hub>=0.20.0     # Download model

# Existing dependencies
numpy>=1.24.0
opencv-python>=4.8.0
PyMuPDF>=1.23.0
PyQt6>=6.5.0
```

---

## 8. HÆ°á»›ng dáº«n sá»­ dá»¥ng

### 8.1. CÃ i Ä‘áº·t

```bash
# 1. CÃ i Ä‘áº·t dependencies
pip install shapely ultralytics huggingface_hub

# 2. Download model (tá»± Ä‘á»™ng khi cháº¡y láº§n Ä‘áº§u)
# Hoáº·c download thá»§ cÃ´ng:
python -c "
from huggingface_hub import hf_hub_download
hf_hub_download(
    repo_id='juliozhao/DocLayout-YOLO-DocStructBench',
    filename='doclayout_yolo_docstructbench_imgsz1024.pt',
    local_dir='./models/doclayout_yolo'
)
"
```

### 8.2. Sá»­ dá»¥ng trong á»©ng dá»¥ng

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    HÆ¯á»šNG DáºªN Sá»¬ Dá»¤NG TRONG APP                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  BÆ°á»›c 1: Má»Ÿ file PDF                                                    â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                     â”‚
â”‚  Menu "Tá»‡p tin" â†’ "Má»Ÿ file..." â†’ Chá»n PDF                              â”‚
â”‚                                                                          â”‚
â”‚  BÆ°á»›c 2: Báº­t báº£o vá»‡ vÄƒn báº£n                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                              â”‚
â”‚  Panel "CÃ i Ä‘áº·t" â†’ â˜‘ "Báº­t báº£o vá»‡ vÄƒn báº£n (DocLayout-YOLO)"            â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚  â”‚ CÃ i Ä‘áº·t                                 â”‚                            â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                            â”‚
â”‚  â”‚ â˜‘ Báº­t báº£o vá»‡ vÄƒn báº£n (DocLayout-YOLO)  â”‚ â† Báº­t tÃ­nh nÄƒng           â”‚
â”‚  â”‚   â”œâ”€ â˜‘ VÄƒn báº£n   â˜‘ Báº£ng   â˜ HÃ¬nh áº£nh  â”‚ â† Chá»n loáº¡i báº£o vá»‡       â”‚
â”‚  â”‚   â”œâ”€ Lá» an toÃ n: [====â—‹====] 5 px      â”‚ â† Äiá»u chá»‰nh margin       â”‚
â”‚  â”‚   â””â”€ Äá»™ tin cáº­y: [====â—‹====] 0.5       â”‚ â† Äiá»u chá»‰nh threshold   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                                                          â”‚
â”‚  BÆ°á»›c 3: Chá»n vÃ¹ng xÃ³a                                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                   â”‚
â”‚  â€¢ GÃ³c: Chá»n gÃ³c (TL/TR/BL/BR) vÃ  kÃ­ch thÆ°á»›c                           â”‚
â”‚  â€¢ Cáº¡nh: Chá»n cáº¡nh (TrÃ¡i/Pháº£i/TrÃªn/DÆ°á»›i) vÃ  Ä‘á»™ dÃ y                    â”‚
â”‚  â€¢ TÃ¹y chá»n: Váº½ vÃ¹ng trá»±c tiáº¿p trÃªn preview                            â”‚
â”‚                                                                          â”‚
â”‚  BÆ°á»›c 4: Xem trÆ°á»›c                                                      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                       â”‚
â”‚  Preview sáº½ hiá»ƒn thá»‹:                                                   â”‚
â”‚  â€¢ VÃ¹ng báº£o vá»‡ (text) mÃ u xanh lam                                     â”‚
â”‚  â€¢ VÃ¹ng sáº½ xÃ³a (safe zone) mÃ u Ä‘á» nháº¡t                                 â”‚
â”‚  â€¢ Pháº§n giao (Ä‘Æ°á»£c báº£o vá»‡) khÃ´ng bá»‹ xÃ³a                                â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                       â”‚
â”‚  â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘          â”‚  â–‘ = VÃ¹ng sáº½ xÃ³a                     â”‚
â”‚  â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘                â”‚  â–ˆ = Text Ä‘Æ°á»£c báº£o vá»‡                â”‚
â”‚  â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â”‚                                       â”‚
â”‚  â”‚ â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   â–ˆâ–ˆ TIÃŠU Äá»€ â–ˆâ–ˆâ–ˆâ–ˆ   â”‚                                       â”‚
â”‚  â”‚ â–‘â–‘â–‘â–‘â–‘â–‘     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â”‚                                       â”‚
â”‚  â”‚                              â”‚                                       â”‚
â”‚  â”‚     Ná»™i dung vÄƒn báº£n...      â”‚                                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                       â”‚
â”‚                                                                          â”‚
â”‚  BÆ°á»›c 5: Xá»­ lÃ½ vÃ  lÆ°u                                                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                    â”‚
â”‚  Click "Xá»­ lÃ½" â†’ Äá»£i xá»­ lÃ½ â†’ "LÆ°u file" hoáº·c "LÆ°u file khÃ¡c..."       â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.3. Sá»­ dá»¥ng qua code (API)

```python
"""
VÃ­ dá»¥ sá»­ dá»¥ng API
"""
import cv2
import numpy as np
from core.processor import StapleRemoverProcessor
from core.zone_optimizer import Zone

# 1. Khá»Ÿi táº¡o processor
processor = StapleRemoverProcessor()

# 2. Báº­t text protection
processor.set_text_protection(
    enabled=True,
    margin=5,                    # 5px safe margin
    confidence_threshold=0.5     # 50% confidence
)

# 3. Load áº£nh trang PDF
page_image = cv2.imread("page_001.png")

# 4. Äá»‹nh nghÄ©a vÃ¹ng xÃ³a
zones = [
    Zone(zone_type='corner', bounds=(0, 0, 100, 100), 
         position='top_left'),
    Zone(zone_type='edge', bounds=(0, 0, 50, 800), 
         position='left'),
]

# 5. Xá»­ lÃ½ trang
result_image = processor.process_page(page_image, zones)

# 6. LÆ°u káº¿t quáº£
cv2.imwrite("page_001_cleaned.png", result_image)

# === HOáº¶C: Xá»­ lÃ½ thá»§ cÃ´ng Ä‘á»ƒ debug ===

from core.layout_detector import DocLayoutYOLO
from core.zone_optimizer import HybridPolygonOptimizer

# Detect layout
detector = DocLayoutYOLO()
regions = detector.detect(page_image)

print(f"Found {len(regions)} protected regions:")
for r in regions:
    print(f"  - {r.label}: {r.bbox}, conf={r.confidence:.2f}")

# Optimize zones
optimizer = HybridPolygonOptimizer(margin=5)

for zone in zones:
    safe_zones = optimizer.optimize(zone, regions)
    print(f"\nZone {zone.position}:")
    print(f"  Original area: {zone.to_shapely().area:.0f} pxÂ²")
    for sz in safe_zones:
        print(f"  Safe zone: {sz.area:.0f} pxÂ² "
              f"(coverage: {sz.coverage*100:.1f}%)")
```

---

## 9. Phá»¥ lá»¥c: MÃ£ nguá»“n tham kháº£o

### 9.1. Test script

```python
"""
test_text_protection.py
Script test tÃ­ch há»£p DocLayout-YOLO
"""

import cv2
import numpy as np
from pathlib import Path

# Import modules
from core.layout_detector import DocLayoutYOLO
from core.zone_optimizer import HybridPolygonOptimizer, Zone

def test_layout_detection():
    """Test layout detection"""
    print("=== Test Layout Detection ===\n")
    
    # Load test image
    image_path = "test_page.png"
    image = cv2.imread(image_path)
    
    if image is None:
        print(f"Error: Cannot load {image_path}")
        return
    
    print(f"Image shape: {image.shape}")
    
    # Initialize detector
    detector = DocLayoutYOLO(confidence_threshold=0.3)
    
    # Detect
    regions = detector.detect(image)
    
    print(f"\nFound {len(regions)} regions:")
    for i, r in enumerate(regions):
        print(f"  [{i}] {r.label}: {r.bbox}, conf={r.confidence:.3f}")
    
    # Visualize
    vis_image = image.copy()
    colors = {
        'title': (255, 0, 0),        # Blue
        'plain_text': (0, 255, 0),   # Green
        'table': (0, 0, 255),        # Red
    }
    
    for r in regions:
        x1, y1, x2, y2 = r.bbox
        color = colors.get(r.label, (128, 128, 128))
        cv2.rectangle(vis_image, (x1, y1), (x2, y2), color, 2)
        cv2.putText(vis_image, f"{r.label} {r.confidence:.2f}",
                    (x1, y1-5), cv2.FONT_HERSHEY_SIMPLEX, 
                    0.5, color, 1)
    
    cv2.imwrite("test_detection_result.png", vis_image)
    print("\nSaved: test_detection_result.png")


def test_zone_optimization():
    """Test zone optimization"""
    print("\n=== Test Zone Optimization ===\n")
    
    # Load test image
    image = cv2.imread("test_page.png")
    
    # Detect regions
    detector = DocLayoutYOLO(confidence_threshold=0.3)
    regions = detector.detect(image)
    
    # Create test zones
    h, w = image.shape[:2]
    zones = [
        Zone(zone_type='corner', bounds=(0, 0, 150, 150), 
             position='top_left'),
        Zone(zone_type='corner', bounds=(w-150, 0, w, 150), 
             position='top_right'),
        Zone(zone_type='edge', bounds=(0, 0, 50, h), 
             position='left'),
    ]
    
    # Optimize
    optimizer = HybridPolygonOptimizer(margin=10)
    
    vis_image = image.copy()
    
    for zone in zones:
        print(f"\nZone: {zone.zone_type} - {zone.position}")
        print(f"  Original bounds: {zone.bounds}")
        
        safe_zones = optimizer.optimize(zone, regions)
        
        if not safe_zones:
            print("  Result: No safe zone (fully covered by text)")
            continue
        
        for i, sz in enumerate(safe_zones):
            print(f"  Safe zone {i}: area={sz.area:.0f}pxÂ², "
                  f"coverage={sz.coverage*100:.1f}%")
            
            # Draw safe zone
            cv2.fillPoly(vis_image, [sz.to_opencv_contour()], 
                        (200, 200, 255))  # Light red
    
    # Draw protected regions
    for r in regions:
        x1, y1, x2, y2 = r.bbox
        cv2.rectangle(vis_image, (x1, y1), (x2, y2), 
                     (255, 200, 200), 2)  # Light blue border
    
    cv2.imwrite("test_optimization_result.png", vis_image)
    print("\nSaved: test_optimization_result.png")


if __name__ == "__main__":
    test_layout_detection()
    test_zone_optimization()
```

### 9.2. Benchmark script

```python
"""
benchmark_performance.py
Script Ä‘o hiá»‡u nÄƒng
"""

import time
import cv2
import numpy as np
from core.layout_detector import DocLayoutYOLO
from core.zone_optimizer import HybridPolygonOptimizer, Zone

def benchmark():
    # Create test image
    image = np.random.randint(0, 255, (1200, 800, 3), dtype=np.uint8)
    
    # Initialize
    detector = DocLayoutYOLO()
    optimizer = HybridPolygonOptimizer()
    
    # Warmup
    detector.detect(image)
    
    # Benchmark detection
    n_runs = 100
    start = time.time()
    for _ in range(n_runs):
        regions = detector.detect(image)
    detection_time = (time.time() - start) / n_runs * 1000
    
    print(f"Detection: {detection_time:.2f} ms/page")
    
    # Benchmark optimization
    zone = Zone(zone_type='corner', bounds=(0, 0, 200, 200))
    start = time.time()
    for _ in range(n_runs):
        optimizer.optimize(zone, regions)
    optimization_time = (time.time() - start) / n_runs * 1000
    
    print(f"Optimization: {optimization_time:.2f} ms/zone")
    print(f"Total: {detection_time + optimization_time:.2f} ms/page")
    
    # Throughput
    pages_per_second = 1000 / (detection_time + optimization_time)
    pages_per_day = pages_per_second * 86400
    print(f"\nThroughput: {pages_per_second:.1f} pages/sec")
    print(f"           {pages_per_day/1e6:.2f}M pages/day")


if __name__ == "__main__":
    benchmark()
```

---

## Tá»•ng káº¿t

### Nhá»¯ng gÃ¬ Ä‘Ã£ Ä‘áº¡t Ä‘Æ°á»£c

1. **PhÃ¡t hiá»‡n tá»± Ä‘á»™ng** vÃ¹ng vÄƒn báº£n, báº£ng, cÃ´ng thá»©c trong tÃ i liá»‡u
2. **Báº£o vá»‡ thÃ´ng minh** ná»™i dung quan trá»ng khá»i bá»‹ xÃ³a nháº§m
3. **Tá»‘i Æ°u hÃ³a** vÃ¹ng xÃ³a Ä‘á»ƒ Ä‘áº¡t hiá»‡u quáº£ tá»‘i Ä‘a
4. **Tá»‘c Ä‘á»™ cao** (~5ms/trang) phÃ¹ há»£p xá»­ lÃ½ hÃ ng loáº¡t

### Lá»£i Ã­ch

| TrÆ°á»›c | Sau |
|-------|-----|
| XÃ³a nháº§m text á»Ÿ gÃ³c/cáº¡nh | Text Ä‘Æ°á»£c báº£o vá»‡ tá»± Ä‘á»™ng |
| Pháº£i kiá»ƒm tra thá»§ cÃ´ng | Tá»± Ä‘á»™ng phÃ¡t hiá»‡n vÃ  cáº£nh bÃ¡o |
| KhÃ´ng phÃ¹ há»£p batch processing | Xá»­ lÃ½ 10M+ trang/ngÃ y |

### HÆ°á»›ng phÃ¡t triá»ƒn

- [ ] ThÃªm OCR Ä‘á»ƒ verify text content
- [ ] Há»— trá»£ custom training cho layout Ä‘áº·c thÃ¹
- [ ] TÃ­ch há»£p vá»›i cÃ¡c format khÃ¡c (TIFF, DJVU)
- [ ] GPU batch processing optimization

---

*TÃ i liá»‡u nÃ y Ä‘Æ°á»£c táº¡o cho dá»± Ã¡n Staple Remover*
*PhiÃªn báº£n: 1.0 | NgÃ y: 2026-01-12*
